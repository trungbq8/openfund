<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0 maximum-scale=1, user-scalable=no">
	<title>OpenFund - Raiser profile</title>
	<link rel="icon" href="/static/app_assets/open_fund_logo.png">
	<link rel="stylesheet" href="/static/css/style.css">
	<link href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Roboto:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css">
	<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">
   <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
</head>
<body>
	<div class="loading-spinner hidden" id="loading-spinner">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 200"><circle fill="#000000" stroke="#000000" stroke-width="15" r="15" cx="40" cy="100"><animate attributeName="opacity" calcMode="spline" dur="2" values="1;0;1;" keySplines=".5 0 .5 1;.5 0 .5 1" repeatCount="indefinite" begin="-.4"></animate></circle><circle fill="#000000" stroke="#000000" stroke-width="15" r="15" cx="100" cy="100"><animate attributeName="opacity" calcMode="spline" dur="2" values="1;0;1;" keySplines=".5 0 .5 1;.5 0 .5 1" repeatCount="indefinite" begin="-.2"></animate></circle><circle fill="#000000" stroke="#000000" stroke-width="15" r="15" cx="160" cy="100"><animate attributeName="opacity" calcMode="spline" dur="2" values="1;0;1;" keySplines=".5 0 .5 1;.5 0 .5 1" repeatCount="indefinite" begin="0"></animate></circle></svg>
   </div>
	<!-- nav bar -->
	<div class="nav-bar">
      <div class="app-logo" onclick="window.location.href='/'">
         <img src="/static/app_assets/open_fund_logo.png" alt="OpenFund logo">
         <p>OpenFund</p>
      </div>
      <div class="nav-bar-select">
         <div class="link" onclick="window.location.href='/invest'">Invest</div>
			<div class="link" onclick="window.location.href='/blog'">Blog</div>
			<div class="link" onclick="window.location.href='/document'">Document</div>
      </div>
      <div class="authenticate">
         <button class="sign-in-up" onclick="window.location.href='/sign-up'" id="sign-in-up-btn">Log In/Sign Up</button>
         <button class="connect-wallet" id="connect-btn">
            <i class="fa-solid fa-wallet"></i>
            <div class="investor_connected_check hidden" id="investor_connected_check" style="background-color: white; color: rgb(0, 1, 69); font-size: 15px; position: absolute; bottom: -3px; right: -3px; display: flex; align-items: center; justify-content: center; border-radius: 50%;"><i class="fa-solid fa-circle-check"></i></div>
         </button>
         <button class="raiser-account hidden" id="raiser-account">
            <i class="fa-solid fa-user"></i>
         </button>
      </div>
      <button class="menu-btn">
         <i class="fa-solid fa-bars"></i>
      </button>
      <div class="investor-account-manage hidden" id="investor-account-manage">
         <p>Investor account</p>
         <input name="investor-wallet-address" id="investor-wallet-address" style="text-align: center; font-size: 12px; padding: 0; border: 0;" readonly required>
         <div class="investor-account-manage-btn" onclick="window.location.href='/edit-profile'">Edit profile</div>
         <div class="investor-account-manage-btn" id="investor-disconnect-btn">Disconnect</div>
      </div>
      <div class="raiser-account-manage hidden" id="raiser-account-manage">
         <p>Raiser account</p>
			<div class="raiser-account-manage-btn" onclick="window.location.href='/submitted-project'">Submitted projects</div>
         <div class="raiser-account-manage-btn" onclick="window.location.href='/raiser-profile/{{ raiser_id }}'">Profile</div>
         <div class="raiser-account-manage-btn" onclick="window.location.href='/edit-account'">Account settings</div>
         <div class="raiser-account-manage-btn" id="raiser-log-out-btn" onclick="window.location.href='/log-out'">Log out</div>
      </div>
   </div>
   <div class="nav-bar-mobile hidden">
      <div class="link-mobile" onclick="window.location.href='/invest'">Invest<i class="fa-solid fa-arrow-right"></i></div>
      <hr>
      <div class="link-mobile" onclick="window.location.href='/blog'">Blog<i class="fa-solid fa-arrow-right"></i></div>
      <hr>
      <div class="link-mobile" onclick="window.location.href='/document'">Document<i class="fa-solid fa-arrow-right"></i></div>
      <hr>
      <div class="authenticate-mobile">
         <button class="connect-wallet-mobile" id="connect-btn-mobile">
            Connect wallet<i class="fa-solid fa-wallet"></i>
         </button>
         <button class="sign-in-up-mobile" onclick="window.location.href='/sign-up'" id="sign-in-up-mobile-btn">Log In/Sign Up</button>
         <button class="sign-in-up-mobile" id="raiser-account-mobile-btn">Raiser Account</button>
      </div>
      <div class="investor-account-manage-mobile hidden" id="investor-account-manage-mobile">
         <p>Investor account</p>
         <input name="investor-wallet-address hidden" id="investor-wallet-address-mobile" style="text-align: center; font-size: 12px; padding: 0; border: 0;" readonly required>
         <div class="investor-account-manage-btn" onclick="window.location.href='/edit-profile'">Edit profile</div>
         <div class="investor-account-manage-btn" id="investor-disconnect-btn-mobile">Disconnect</div>
      </div>
      <div class="raiser-account-manage-mobile hidden" id="raiser-account-manage-mobile">
         <p>Raiser account</p>
			<div class="raiser-account-manage-btn" onclick="window.location.href='/submitted-project'">Submitted projects</div>
         <div class="raiser-account-manage-btn" onclick="window.location.href='/raiser-profile/{{ raiser_id }}'">Profile</div>
         <div class="raiser-account-manage-btn" onclick="window.location.href='/edit-account'">Account settings</div>
         <div class="raiser-account-manage-btn" id="raiser-log-out-btn-mobile" onclick="window.location.href='/log-out'">Log out</div>
      </div>
      <button class="close-nav-bar-mobile-btn" id="close-nav-bar-mobile-btn">Close</button>
   </div>
	 <!-- end nav bar -->
	<!-- connect wallet -->
	<div class="overlay hidden" id="overlay">
		<div class="connect-wallet-box hidden" id="connect-wallet-box">
			<button class="close-connect-wallet-btn" id="close-connect-wallet-btn">
				<i class="fa-solid fa-xmark"></i>
			</button>
			<h1>Connect wallet</h1>
			<p>(For investors only)</p>
			<hr style="width: 100px;">
			<button class="wallet_intergrated" data-wallet="metamask"><img class="wallet-icon-logo" src="/static/app_assets/metamask.png" alt="Metamask logo">Metamask</button>
         <button class="wallet_intergrated" data-wallet="binance"><img class="wallet-icon-logo" src="/static/app_assets/binance_web3.png" alt="Metamask logo">Binance Web3</button>
         <button class="wallet_intergrated" data-wallet="okx"><img class="wallet-icon-logo" src="/static/app_assets/okx_web3.png" alt="Metamask logo">OKX Web3</button>
         <button class="wallet_intergrated" data-wallet="trust"><img class="wallet-icon-logo" src="/static/app_assets/trust_wallet.png" alt="Metamask logo">Trust Wallet</button>
         <button class="wallet_intergrated" data-wallet="coinbase"><img class="wallet-icon-logo" src="/static/app_assets/coinbase_wallet.png" alt="Metamask logo">Coinbase Wallet</button>
         <p>By connecting a wallet, you agree to the OpenFund’s <a style="color:black" href="/term-service">Terms of Service</a> and consent to its <a style="color:black" href="/privacy-policy">Privacy Policy</a>.</p>
		</div>
	</div>
	<style>
		.investor-profile-banner{
			width: 100%;
			height: 50vh;
			display: flex;
			justify-content: center;
			align-items: center;
			padding-top: 50px;
			background-image: url(/static/app_assets/profile-banner.png);
			background-size: cover;
		}
		.option-select{
			width: 100%;
			display: flex;
			align-items: center;
			justify-content: center;
			background-color: rgb(245, 245, 245);
		}
		.select-option-btn{
			border: solid 1px rgb(0, 1, 69);
			background-color: white;
			border-radius: 20px;
			padding: 10px 15px;
			cursor: pointer;
			margin: 20px 5px;
		}
		.introduction{
			width: 100%;
			display: flex;
			flex-direction: column;
			padding: 30px 20px;
			align-items: center;
			justify-content: center;
			box-sizing: border-box;
		}
		.introduction-box, .disclaimer{
			width: 100%;
			max-width: 800px;
		}
		.project-list{
			width: 100%;
			display: flex;
			padding: 30px 0px;
			align-items: center;
			justify-content: center;
		}
		.project{
			width: clamp(330px, 90%, 800px);
			border: solid 1px black;
			border-radius: 30px;
			height: 300px
		}
      .raiser-profile-box{
         width: 100%;
         max-width: 500px;
         border: solid 1px black;
         border-radius: 20px;
         padding: 15px;
         height: 150px;
         margin: 0 20px;
         background-color: transparent;
         display: flex;
         align-items: center;
         justify-content: start;
         gap: 10px;
         box-sizing: border-box;
			border: solid 1px rgb(200, 200, 200);
    		box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.1);
			backdrop-filter: blur(7px);
      }
      .user-image-box{
         width: 100px;
         height: 100px;
         border-radius: 50%;
         border: solid 1px black;
         overflow: hidden;
      }
      .user-image-box img{
         width: 100%;
         height: 100%;
         object-fit: cover;
      }
      .user-name-email-wallet{
         flex: 1;
      }
      .user-name-email-wallet p{
         margin: 0;
         font-size: clamp(0.69rem, 2.9vw, 1rem);
      }
      .other-info{
         display: flex;
         align-items: center;
         gap: 3px
      }
	</style>
	<div class="investor-profile-banner">
		<div class="raiser-profile-box">
         <div class="user-image-box">
            <img src="{{ user_data.logo_url or 'https://openfund.live/static/app_assets/user_default.png'}}">
         </div>
         <div class="user-name-email-wallet">
            <p id="user-name" style="font-weight: bold; font-size: clamp(1rem, 4vw, 1.2rem);">Donal Donald Trump</p>
            <p id="user-email" style="opacity: 0.69">trump@trump.com</p>
            <div class="user-wallet-wrapper"><p id="user-wallet" style="opacity: 0.69; padding: 1px 3px; border: solid 1px black; border-radius: 10px;display: inline-block; white-space: nowrap; margin-right: 3px;">0x0000...0000</p><i class="fa-solid fa-copy" id="copy-wallet-btn" style="cursor: pointer; font-size: clamp(0.69rem, 2.9vw, 1rem);"></i></div>
            <div class="other-info">
               <i id="x-link" class="fa-brands fa-square-x-twitter" onclick="window.location.href='{{ user_data.x_link }}'" style="font-size: clamp(0.8rem, 3vw, 1rem);
    cursor: pointer;"></i>
               <i id="website-link" class="fa-solid fa-globe"  onclick="window.location.href='{{ user_data.website_link }}'" style="font-size: clamp(0.75rem, 2vw, 0.9rem);
    cursor: pointer;"></i>
            <hr style="margin: 0;"><p id="number-of-projects" style="font-size: clamp(0.75rem, 2vw, 0.9rem);">0</p><p style="font-size: clamp(0.75rem, 2vw, 0.9rem);">projects</p>
            </div>
         </div>
      </div>
	</div>
	<div class="option-select">
		<button class="select-option-btn" id="select-introduction-btn" onclick="updateOptionDisplay('introduction')">Introduction</button>
		<button class="select-option-btn" id="select-all-project-btn" onclick="updateOptionDisplay('projects')">Projects</button>
	</div>
	<div class="introduction">
		<div class="introduction-box" id="introduction-area">

		</div>
		<div class="disclaimer">
			<p><b>⚠️ Disclaimer</b><i> All information provided on this profile page has been submitted by the raiser and is not independently verified by our platform. We do not guarantee the accuracy, completeness, or reliability of the content. Investors are encouraged to conduct their own due diligence before making any decisions.</i></p>
		</div>
	</div>
	<div class="project-list">
		<div class="project">

		</div>
	</div>
	<div class="footer">
	<div class="app-info">
		<div class="app-logo-footer" onclick="window.location.href='/'">
			<img src="/static/app_assets/open_fund_logo.png" alt="OpenFund logo">
			<p>OpenFund</p>
		</div>
		<div class="term-links">
			<a href="/privacy_policy">Privacy</a>
			<a href="/terms">Terms</a>
			<a href="/document">Document</a>
			<a href="/blog">Blog</a>
			<a href="/help_center">Help Center</a>
		</div>
		<div class="community-links">
			<i class="fa-brands fa-square-x-twitter" onclick="window.location.href='https://x.com'"></i>
			<i class="fa-brands fa-telegram" onclick="window.location.href='https://telegram.com'"></i>
			<i class="fa-brands fa-facebook" onclick="window.location.href='https://facebook.com'"></i>
			<i class="fa-solid fa-envelope" onclick="window.location.href='mailto:support@openfund.live'"></i>
		</div>
	</div>
	<div class="term-links-mobile">
		<a href="/privacy_policy">Privacy</a>
		<a href="/terms">Terms</a>
		<a href="/document">Document</a>
		<a href="/blog">Blog</a>
		<a href="/help_center">Help Center</a>
	</div>
	</div>
</body>
	<script>
		//connect
		const menuBtn = document.querySelector('.menu-btn');
		const mobileNav = document.querySelector('.nav-bar-mobile');
		const close_nav_bar_mobile_btn = document.getElementById("close-nav-bar-mobile-btn");
		const copy_wallet_btn = document.getElementById("copy-wallet-btn");
		copy_wallet_btn.addEventListener('click', function(){
			const walletAddress = "{{ user_data.wallet_address }}";
			navigator.clipboard.writeText(walletAddress)
				.then(() => {
						showToastMessage("Wallet address copied!", true);
				})
				.catch(err => {
						showToastMessage("Failed to copy wallet address", false);
				});
		})

		menuBtn.addEventListener('click', () => {
			mobileNav.classList.remove('hidden');
		});

		close_nav_bar_mobile_btn.addEventListener('click', () => {
			mobileNav.classList.add('hidden');
		});

		//select projects
		const select_introduction_btn = document.getElementById("select-introduction-btn");
		const select_all_project_btn = document.getElementById("select-all-project-btn");

		function updateOptionDisplay(selected){
			if (selected == 'introduction'){
				select_introduction_btn.style.backgroundColor = "rgb(0, 1, 69)";
				select_introduction_btn.style.color = "white";
				select_all_project_btn.style.backgroundColor = "white";
				select_all_project_btn.style.color = "black"
			}

			if (selected == 'projects'){
				select_all_project_btn.style.backgroundColor = "rgb(0, 1, 69)";
				select_all_project_btn.style.color = "white";
				select_introduction_btn.style.backgroundColor = "white";
				select_introduction_btn.style.color = "black"
			}
		}
		updateOptionDisplay('introduction')

		const userNameDisplay = document.getElementById('user-name');
      const userEmailDisplay = document.getElementById('user-email');
		const userWalletDisplay = document.getElementById('user-wallet');
		const userNumberProject = document.getElementById('number-of-projects');
		const userXLink = document.getElementById('x-link');
		const userWebsiteLink = document.getElementById('website-link');
      const userImageElement = document.querySelector('.user-image-box img');
		const introduction_area = document.getElementById("introduction-area");
		
		function decodeHTMLEntities(text) {
         const textArea = document.createElement('textarea');
         textArea.innerHTML = text;
         return textArea.value;
      }

		// Load user data
      function loadUserData() {
         const firstNameInput = "{{ user_data.first_name }}" || '';
         const lastNameInput = "{{ user_data.last_name }}" || '';
         userWalletDisplay.textContent = "{{ user_data.wallet_address }}".slice(0, 6) + '...' + "{{ user_data.wallet_address }}".slice(-4);
         userNumberProject.textContent =  "{{ user_data.number_projects }}" || '0';
         userNameDisplay.textContent = `${firstNameInput} ${lastNameInput}`;
         userEmailDisplay.textContent = "{{ user_data.email }}" || '';
         
         if ("{{ user_data.bio }}" != "") {
            introduction_area.innerHTML = decodeHTMLEntities("{{ user_data.bio }}");
         } else {
				introduction_area.innerHTML = "<p>Raiser introduction updating...</p>"
			}

			if ("{{ user_data.x_link }}" == "") {
            userXLink.style.cursor = "unset";
				userXLink.style.color = "#868686";
				userXLink.removeAttribute("onclick");
         }
			if ("{{ user_data.website_link }}" == "") {
            userWebsiteLink.style.cursor = "unset";
				userWebsiteLink.style.color = "#868686";
				userWebsiteLink.removeAttribute("onclick");
         }
      }
		loadUserData()

		let nonce;
      nonce = "{{ nonce }}";
      let isInvstorConnecting = true;
      const investor_wallet_connected = {{ investor_connected | tojson }};
      const raiser_loggedin = {{ raiser_logged_in | tojson }};
      const shortWallet = "{{ investor_wallet_address }}".slice(0, 6) + '...' + "{{ investor_wallet_address }}".slice(-4);
	</script>
	<script src="/static/script/connect.js"></script>
   <script src="/static/script/main.js"></script>
	<script src="/static/script/nav-bar.js"></script>
</html>